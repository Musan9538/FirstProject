# 収穫管理システム 仕様書

## 1. システム概要

### 1.1 目的
農作物の収穫量を記録・管理するためのWebアプリケーション。
ユーザーごとに収穫量を記録し、管理者がそれらを一括で確認できる。

### 1.2 対象ユーザー
- 一般ユーザー：収穫量を記録する農作業者
- 管理者：全ユーザーの収穫量を管理・確認する管理者

## 2. 機能仕様

### 2.1 認証機能
#### ログイン
- ユーザー名とパスワードによる認証
- 未入力時のバリデーションあり
- ログイン失敗時のエラーメッセージ表示

#### ログアウト
- ヘッダーメニューからログアウト可能
- ログアウト後はログイン画面に遷移

### 2.2 ユーザー管理機能（管理者のみ）
#### ユーザー一覧
- 登録済みユーザーの一覧表示
- ユーザー名と管理者権限の有無を表示

#### ユーザー登録
- 新規ユーザーの登録
- 必須項目：
  - ユーザー名（重複不可）
  - パスワード
  - パスワード（確認）
- 管理者権限の付与可能

#### ユーザー編集
- 既存ユーザーの情報更新
- 編集可能項目：
  - ユーザー名
  - パスワード（変更する場合のみ）
  - 管理者権限

#### ユーザー削除
- 既存ユーザーの削除
- 自身のアカウントは削除不可

### 2.3 収穫量管理機能
#### 収穫量入力
- 収穫日と収穫量（kg）の記録
- 必須項目：
  - 収穫日（日付選択）
  - 収穫量（0.1kg以上の数値）

#### 収穫量一覧
- 記録された収穫量の一覧表示
- 表示項目：
  - 収穫日
  - 収穫量
  - 登録ユーザー名（管理者のみ表示）
- 日付の降順で表示

#### 収穫量削除
- 登録済みの収穫量データの削除
- 一般ユーザーは自身の記録のみ削除可能
- 管理者は全ての記録を削除可能

## 3. 画面仕様

### 3.1 共通レイアウト
#### ヘッダー（ログイン時のみ表示）
- システムタイトル（収穫管理システム）
- ログインユーザー名
- メニュー
  - 収穫量入力
  - 収穫量一覧
  - ユーザー管理（管理者のみ）
  - ログアウト

### 3.2 各画面レイアウト
#### ログイン画面
- システムタイトル
- ユーザー名入力欄
- パスワード入力欄
- ログインボタン

#### ユーザー管理画面
- ユーザー一覧表示
- 新規登録ボタン
- 各ユーザーの編集・削除ボタン

#### 収穫量入力画面
- 収穫日入力欄（日付選択）
- 収穫量入力欄（数値）
- 登録ボタン
- キャンセルボタン

#### 収穫量一覧画面
- 収穫記録の一覧表示
- 各記録の削除ボタン

## 4. 非機能要件

### 4.1 セキュリティ
- パスワードのハッシュ化
- CSRF対策
- 認証・認可の適切な制御

### 4.2 ユーザビリティ
- レスポンシブデザイン対応
- 直感的な操作性
- 適切なエラーメッセージの表示

### 4.3 パフォーマンス
- 画面遷移のレスポンス：1秒以内
- データベースクエリの最適化

## 5. 開発環境・使用技術

### 5.1 フレームワーク・言語
- Ruby on Rails
- Ruby

### 5.2 フロントエンド
- Slim
- Bootstrap
- JavaScript

### 5.3 データベース
- SQLite（開発環境） 